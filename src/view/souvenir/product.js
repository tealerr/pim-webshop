const productMaster = {
    student: {
        lamlong: [
            {
                id: 1,
                name: "เข็มการบิน",
                img: "../image/souvenir/เครื่องแบบการบิน/เข็มการบิน.jpg",
                img2: "../../image/souvenir/เครื่องแบบการบิน/เข็มการบิน.jpg",
                price: 70,
                qty: 5,
            },
            {
                id: 2,
                name: "เนกไทชาย",
                img: "../image/souvenir/เครื่องแบบการบิน/เน็กไท.jpg",
                img2: "../../image/souvenir/เครื่องแบบการบิน/เน็กไท.jpg",
                price: 110,
                qty: 2,
            },
            {
                id: 3,
                name: "ป้ายชื่อสาขา",
                img: "../image/souvenir/เครื่องแบบการบิน/ป้ายสาขา.jpg",
                img2: "../../image/souvenir/เครื่องแบบการบิน/ป้ายสาขา.jpg",
                price: 115,
                qty: 0,
            },
            {
                id: 4,
                name: "เข็มขัด",
                img: "../image/souvenir/เครื่องแบบการบิน/เข็มขัด.jpg",
                img2: "../../image/souvenir/เครื่องแบบการบิน/เข็มขัด.jpg",
                price: 120,
                qty: 10,
            },
            {
                id: 5,
                name: "อินธนู",
                img: "../image/souvenir/เครื่องแบบการบิน/อินธนู.jpg",
                img2: "../../image/souvenir/เครื่องแบบการบิน/อินธนู.jpg",
                price: 175,
                qty: 10,
            },
            {
                id: 6,
                name: "ปีกการบิน",
                img: "../image/souvenir/เครื่องแบบการบิน/ปีกการบิน.jpg",
                img2: "../../image/souvenir/เครื่องแบบการบิน/ปีกการบิน.jpg",
                price: 145,
                qty: 10,
            },
        ],
        man: [
            {
                id: 5,
                name: "เนกไทชาย",
                img: "../image/souvenir/เครื่องแบบนักศึกษาชาย/men.jpg",
                img2: "../../image/souvenir/เครื่องแบบนักศึกษาชาย/men.jpg",
                price: 110,
                qty: 10,
            },
            {
                id: 6,
                name: "เนกไทชาย",
                img: "../image/souvenir/เครื่องแบบนักศึกษาชาย/necktie.jpg",
                img2: "../../image/souvenir/เครื่องแบบนักศึกษาชาย/necktie.jpg",
                price: 110,
                qty: 10,
            },
            {
                id: 7,
                name: "เข็มขัด",
                img: "../image/souvenir/เครื่องแบบนักศึกษาชาย/belt.jpg",
                img2: "../../image/souvenir/เครื่องแบบนักศึกษาชาย/belt.jpg",
                price: 120,
                qty: 10,
            },
        ],
        women: [
            {
                id: 8,
                name: "เข็มขัด",
                img: "../image/souvenir/เครื่องแบบนักศึกษาหญิง/กระดุม.jpg",
                img2: "../../image/souvenir/เครื่องแบบนักศึกษาหญิง/กระดุม.jpg",
                price: 50,
                qty: 10,
            },
            {
                id: 9,
                name: "ตุ้งติ้ง",
                img: "../image/souvenir/เครื่องแบบนักศึกษาหญิง/ตุ้งติ้ง.jpg",
                img2: "../../image/souvenir/เครื่องแบบนักศึกษาหญิง/ตุ้งติ้ง.jpg",
                price: 55,
                qty: 10,
            },
            {
                id: 10,
                name: "เข็มกลัด",
                img: "../image/souvenir/เครื่องแบบนักศึกษาหญิง/เข็มกลัด.jpg",
                img2: "../../image/souvenir/เครื่องแบบนักศึกษาหญิง/เข็มกลัด.jpg",
                price: 55,
                qty: 10,
            },
            {
                id: 11,
                name: "เข็มขัด",
                img: "../image/souvenir/เครื่องแบบนักศึกษาชาย/belt.jpg",
                img2: "../../image/souvenir/เครื่องแบบนักศึกษาชาย/belt.jpg",
                price: 120,
                qty: 10,
            },
        ],
    },
    shirt: [
        {
            id: 12,
            name: "เสื้อยืดดำ",
            img: "../image/product/poloAndtshirt/blackTshirt.jpg",
            price: 290,
            qty: 10,
        },
        {
            id: 13,
            name: "เสื้อยืดเหลือง",
            img: "../image/product/poloAndtshirt/yellowTshirt.jpg",
            price: 290,
            qty: 10,
        },
        {
            id: 14,
            name: "เสื้อยืดฟ้า",
            img: "../image/product/poloAndtshirt/bluePolo.jpg",
            price: 290,
            qty: 10,
        },
        {
            id: 15,
            name: "เสื้อยืดขาว",
            img: "../image/product/poloAndtshirt/whitePolo.jpg",
            price: 290,
            qty: 10,
        },
        {
            id: 16,
            name: "เสื้อยืดเทา",
            img: "../image/product/poloAndtshirt/greyTshirt.jpg",
            price: 290,
            qty: 10,
        },
        {
            id: 17,
            name: "เสื้อโปโลดำ",
            img: "../image/product/poloAndtshirt/blackPolo.jpg",
            price: 390,
            qty: 10,
        },
        {
            id: 18,
            name: "เสื้อโปโลเหลือง",
            img: "../image/product/poloAndtshirt/YellowPolo.jpg",
            price: 390,
            qty: 10,
        },
        {
            id: 19,
            name: "เสื้อโปโลขาว",
            img: "../image/product/poloAndtshirt/whitePolo.jpg",
            price: 390,
            qty: 10,
        },
        {
            id: 20,
            name: "เสื้อโปโลกรม",
            img: "../image/product/poloAndtshirt/3Polo.jpg",
            price: 390,
            qty: 10,
        },
        {
            id: 20,
            name: "เสื้อโปโลกรม",
            img: "../image/product/poloAndtshirt/3Polo.jpg",
            price: 390,
            qty: 10,
        },
        {
            id: 20,
            name: "เสื้อโปโลกรม",
            img: "../image/product/poloAndtshirt/3Polo.jpg",
            price: 390,
            qty: 10,
        },
        {
            id: 20,
            name: "เสื้อโปโลกรม",
            img: "../image/product/poloAndtshirt/3Polo.jpg",
            price: 390,
            qty: 10,
        },
    ],
    hood: [
        {
            id: 21,
            name: "เสื้อยืดแขนยาวดำ",
            img: "../image/product/jacket/blackTshirt.jpg",
            price: 290,
            qty: 10,
        },
        {
            id: 22,
            name: "เสื้อยืดแขนยาวเทา",
            img: "../image/product/jacket/greyTshirt.jpg",
            price: 290,
            qty: 10,
        },
        {
            id: 23,
            name: "เสื้อฮู้ดกรม",
            img: "../image/product/jacket/hood.jpg",
            price: 590,
            qty: 10,
        },
        {
            id: 24,
            name: "เสื้อฮู้ดดำ",
            img: "../image/product/jacket/blackJacket.jpg",
            price: 590,
            qty: 10,
        },
        {
            id: 25,
            name: "เสื้อฮู้ดน้ำตาลแขนสีไข่",
            img: "../image/product/jacket/jacket.jpg",
            price: 590,
            qty: 10,
        },
    ],
    giftshop: [
        {
            id: 26,
            name: "ซองใส่บัตรพร้อมสาย",
            img: "../image/product/giftBasket/cardHolder.jpg",
            price: 50,
            qty: 10,
        },
        {
            id: 27,
            name: "เเมส",
            img: "../image/product/giftBasket/mask.jpg",
            price: 99,
            qty: 10,
        },
        {
            id: 28,
            name: "กระเป๋าถัก",
            img: "../image/product/giftBasket/bag.jpg",
            price: 150,
            qty: 10,
        },
        {
            id: 29,
            name: "หมวกเเก๊ป",
            img: "../image/product/giftBasket/cap.jpg",
            price: 250,
            qty: 10,
        },
        {
            id: 30,
            name: "เซ็ตน้อมหมีOnly",
            img: "../image/product/giftBasket/bear.jpg",
            price: 290,
            qty: 10,
        },
        {
            id: 31,
            name: "เซ็ตเสื้อพร้อมสมุดปากกา",
            img: "../image/product/giftBasket/bookAndPen.jpg",
            price: 590,
            qty: 10,
        },
        {
            id: 32,
            name: "เซ็ตน้องหมีชมพู",
            img: "../image/product/giftBasket/pinkBear.jpg",
            price: 790,
            qty: 10,
        },
        {
            id: 33,
            name: "เซ็ตน้องหมีHappy",
            img: "../image/product/giftBasket/happyBear.jpg",
            price: 890,
            qty: 10,
        },
    ],
}
var productMap = new Map()
var master = ["giftshop", "hood", "shirt"]

for (let x = 0; x < master.length; x++) {
    const e1 = master[x]
    const e2 = productMaster[e1]
    for (let i = 0; i < e2.length; i++) {
        const e3 = e2[i]
        productMap.set(e3.id, e3)
    }
}
for (let i = 0; i < productMaster.student.lamlong.length; i++) {
    const element = productMaster.student.lamlong[i]
    productMap.set(element.id, element)
}
for (let i = 0; i < productMaster.student.man.length; i++) {
    const element = productMaster.student.man[i]
    productMap.set(element.id, element)
}
for (let i = 0; i < productMaster.student.women.length; i++) {
    const element = productMaster.student.women[i]
    productMap.set(element.id, element)
}
function numberWithCommas(x) {
    x = x.toString()
    var pattern = /(-?\d+)(\d{3})/
    while (pattern.test(x)) x = x.replace(pattern, "$1,$2")
    return x
}
var myCart = []
var netAmount = 0
function addCart(id) {
    const thisProd = productMap.get(id)
    if(thisProd.qty <= 0) {
        Swal.fire({
            icon: "warning",
            title: "สินค้าไม่พอจำหน่าย"
        })
        return false;
    }
    var pass = false
    for (let i = 0; i < myCart.length; i++) {
        const element = myCart[i]
        if (element.id == thisProd.id) {
            
                pass = true
                element.count++
                element.netAmount = element.amount * element.count
                break;
        }
    }


    if (!pass) {
        myCart.push({
            count: 1,
            id: thisProd.id,
            name: thisProd.name,
            img: thisProd.img,
            amount: thisProd.price,
            netAmount: thisProd.price,
        })
    }

    Swal.fire({
        icon: "success",
        title: "เพิ่มสินค้าสำเร็จ",
    })
    console.log(myCart)
    renderCart()
    localStorage.setItem("myCart2", JSON.stringify(myCart))
    

    
}

function renderCart() {
    if (myCart.length <= 0) {
        const localCart = localStorage.myCart2
        if (localCart) {
            myCart = JSON.parse(localCart)
        }
    }
    netAmount = 0
    console.log("myCart", myCart)
    for (let i = 0; i < myCart.length; i++) {
        const element = myCart[i]
        netAmount += element.netAmount
    }
    html = `
    <i class="fa fa-shopping-cart" style="font-size:24px""></i>
    <b id=" cart-count">${myCart.length} items</b> / THB 
    <span id="total-price">${numberWithCommas(netAmount.toFixed(2))}</span>`
    $("#renderCart").html(html)
}
renderCart()


